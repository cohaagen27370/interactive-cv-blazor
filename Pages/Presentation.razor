@page "/"
@inherits interactive_cv_blazor.Pages.BasePage
@using interactiveCvBlazor.Store
@inject GlobalState GlobalStateService

<h3>Présentation</h3>

<PageTitle>Présentation - Blanquet Laurent</PageTitle>

@if (GlobalStateService.Presentation != null)
{
    <h4>@GlobalStateService.Presentation.Title</h4>
    <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" Gap="1rem">
        <RadzenCard Variant="Variant.Filled" class="rz-mx-5">
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="3" Style="text-align: center">
                    <RadzenImage Path="images/me-real.jpg" Style="width: 200px; border-radius: 50%;"/>
                </RadzenColumn>
                <RadzenColumn Size="12" SizeMD="9">
                    <RadzenStack Gap="0">
                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Moi en quelques mots</RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Description.Replace("age", _age.ToString()))</b></RadzenText>
                    </RadzenStack>
                </RadzenColumn>
            </RadzenRow>
        </RadzenCard>
        
        <RadzenCard Variant="Variant.Filled" class="rz-mx-5">
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="12">
                    <RadzenStack Gap="0">
                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Mon profil</RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Profil.Replace("anneesExperience", _anneesExperience.ToString()))</b></RadzenText>
                    </RadzenStack>
                </RadzenColumn>
            </RadzenRow>
        </RadzenCard>        
        
        <RadzenCard Variant="Variant.Filled" class="rz-mx-5">
            <RadzenRow>
                <RadzenColumn Size="12" SizeMD="12">
                    <RadzenStack Gap="0">
                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Mes coordonnées</RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Address.Name)</b></RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Address.Street)</b></RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Address.City)</b></RadzenText>
                        <br/>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Address.Telephone)</b></RadzenText>
                        <RadzenText TextStyle="TextStyle.Body1"><b>@((MarkupString)GlobalStateService.Presentation.Address.Email)</b></RadzenText>
                    </RadzenStack>
                </RadzenColumn>
            </RadzenRow>
        </RadzenCard>   
        
    </RadzenStack>
    
}



@code {
    
    //private PresentationDto? _presentation;

    private readonly int _age = DateTime.Now.Year - 1980;
    private readonly int _anneesExperience = DateTime.Now.Year - 2001;

    protected override async Task OnInitializedAsync()
    {
        await GlobalStateService.Init();
    } 
    
    // protected override async Task OnInitializedAsync()
    // {
    //     this._presentation = await DataService.GetPresentationAsync();
    //     await base.OnInitializedAsync();
    // }

}